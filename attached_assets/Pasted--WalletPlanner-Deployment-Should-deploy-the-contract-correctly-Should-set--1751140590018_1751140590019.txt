
  WalletPlanner
    Deployment
      ✔ Should deploy the contract correctly
      ✔ Should set the correct name and symbol
      ✔ Should initialize with zero intents
    Intent Creation
      ✔ Should allow users to create a new intent
      ✔ Should increment intent IDs correctly
      ✔ Should store intent data correctly
      ✔ Should allow empty description
      ✔ Should allow zero estimated cost
    Intent Execution
      1) Should allow intent owner to execute their intent
      2) Should mark intent as executed
      3) Should mint NFT on execution
      ✔ Should prevent unauthorized users from executing intent
      4) Should prevent double execution
      ✔ Should revert for non-existent intent
    Intent Retrieval
      ✔ Should return correct user intents
      ✔ Should return empty array for users with no intents
      ✔ Should retrieve specific intent correctly
    Edge Cases and Security
      ✔ Should handle very long descriptions
      ✔ Should handle maximum uint256 estimated cost
      ✔ Should maintain separate intent counters per user
      5) Should preserve intent data after execution
    Multiple Users
      ✔ Should handle multiple users creating intents simultaneously
      ✔ Should maintain correct intent ownership
    Gas Optimization
      ✔ Should create intents efficiently
      6) Should execute intents efficiently


  19 passing (969ms)
  6 failing

  1) WalletPlanner
       Intent Execution
         Should allow intent owner to execute their intent:
     Error: VM Exception while processing transaction: reverted with reason string 'Not authorized to mint.'
    at WalletPlanner.mintTo (@thirdweb-dev/contracts/base/ERC721Base.sol:114)
    at WalletPlanner.executeIntent (contracts/WalletPlanner.sol:69)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.executeIntent (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (file:///home/runner/workspace/test/WalletPlanner.test.js:113:18)
  

  2) WalletPlanner
       Intent Execution
         Should mark intent as executed:
     Error: VM Exception while processing transaction: reverted with reason string 'Not authorized to mint.'
    at WalletPlanner.mintTo (@thirdweb-dev/contracts/base/ERC721Base.sol:114)
    at WalletPlanner.executeIntent (contracts/WalletPlanner.sol:69)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.executeIntent (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (file:///home/runner/workspace/test/WalletPlanner.test.js:134:7)
  

  3) WalletPlanner
       Intent Execution
         Should mint NFT on execution:
     Error: VM Exception while processing transaction: reverted with reason string 'Not authorized to mint.'
    at WalletPlanner.mintTo (@thirdweb-dev/contracts/base/ERC721Base.sol:114)
    at WalletPlanner.executeIntent (contracts/WalletPlanner.sol:69)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.executeIntent (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (file:///home/runner/workspace/test/WalletPlanner.test.js:143:7)
  

  4) WalletPlanner
       Intent Execution
         Should prevent double execution:
     Error: VM Exception while processing transaction: reverted with reason string 'Not authorized to mint.'
    at WalletPlanner.mintTo (@thirdweb-dev/contracts/base/ERC721Base.sol:114)
    at WalletPlanner.executeIntent (contracts/WalletPlanner.sol:69)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.executeIntent (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (file:///home/runner/workspace/test/WalletPlanner.test.js:155:7)
  

  5) WalletPlanner
       Edge Cases and Security
         Should preserve intent data after execution:
     Error: VM Exception while processing transaction: reverted with reason string 'Not authorized to mint.'
    at WalletPlanner.mintTo (@thirdweb-dev/contracts/base/ERC721Base.sol:114)
    at WalletPlanner.executeIntent (contracts/WalletPlanner.sol:69)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.executeIntent (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (file:///home/runner/workspace/test/WalletPlanner.test.js:234:7)
  

  6) WalletPlanner
       Gas Optimization
         Should execute intents efficiently:
     Error: VM Exception while processing transaction: reverted with reason string 'Not authorized to mint.'
    at WalletPlanner.mintTo (@thirdweb-dev/contracts/base/ERC721Base.sol:114)
    at WalletPlanner.executeIntent (contracts/WalletPlanner.sol:69)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.executeIntent (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (file:///home/runner/workspace/test/WalletPlanner.test.js:289:18)
  



·············································································································
|  Solidity and Network Configuration                                                                       │
························|·················|···············|·················|································
|  Solidity: 0.8.21     ·  Optim: false   ·  Runs: 200    ·  viaIR: false   ·     Block: 30,000,000 gas     │
························|·················|···············|·················|································
|  Methods                                                                                                  │
························|·················|···············|·················|················|···············
|  Contracts / Methods  ·  Min            ·  Max          ·  Avg            ·  # calls       ·  usd (avg)   │
························|·················|···············|·················|················|···············
|  WalletPlanner        ·                                                                                   │
························|·················|···············|·················|················|···············
|      createIntent     ·        146,119  ·      903,255  ·        202,663  ·            47  ·           -  │
························|·················|···············|·················|················|···············
|  Deployments                            ·                                 ·  % of limit    ·              │
························|·················|···············|·················|················|···············
|  WalletPlanner        ·              -  ·            -  ·      5,265,741  ·        17.6 %  ·           -  │
························|·················|···············|·················|················|···············
|  Key                                                                                                      │
·············································································································
|  ◯  Execution gas for this method does not include intrinsic gas overhead                                 │
·············································································································
|  △  Cost was non-zero but below the precision setting for the currency display (see options)              │
·············································································································
|  Toolchain:  hardhat                                                                                      │
·············································································································
~/workspace$ 